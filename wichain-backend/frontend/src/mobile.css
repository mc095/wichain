/* Mobile-specific styles for Tauri mobile apps */

/* Mobile viewport adjustments */
@media (max-width: 768px) {
  .mobile-hidden {
    display: none !important;
  }
  
  .mobile-full {
    width: 100% !important;
    height: 100% !important;
  }
  
  /* HIDE left sidebar (global navigation) on mobile */
  .w-16.backdrop-blur-xl {
    display: none !important;
  }
  
  /* Chat sidebar as overlay drawer on mobile */
  .sidebar-mobile {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    z-index: 9999 !important;
    height: 100vh !important;
    height: 100dvh !important;
    max-width: 320px !important;
    box-shadow: 4px 0 24px rgba(0, 0, 0, 0.6) !important;
    transform: translateX(0) !important;
    transition: transform 0.3s ease !important;
  }
  
  /* Hide sidebar when closed on mobile */
  .sidebar-mobile[style*="width: 0px"] {
    transform: translateX(-100%) !important;
  }
  
  /* Main container - don't let sidebar push content */
  @media (max-width: 768px) {
    .flex.h-screen.overflow-hidden > div:not(.w-16):not(.sidebar-mobile) {
      width: 100% !important;
      flex: 1 !important;
    }
  }
  
  /* Mobile chat layout */
  .chat-mobile {
    padding-bottom: 120px !important; /* Space for mobile keyboard and input */
  }
  
  /* Mobile message spacing */
  .mobile-messages {
    padding-bottom: 100px !important;
    margin-bottom: 80px !important;
  }
  
  /* Mobile message input */
  .message-input-mobile {
    position: fixed !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;
    z-index: 100 !important;
    background: rgba(15, 23, 42, 0.95) !important;
    backdrop-filter: blur(10px) !important;
    border-top: 1px solid rgba(71, 85, 105, 0.3) !important;
  }
  
  /* Mobile touch targets - Apple HIG 44x44 minimum */
  .touch-target {
    min-height: 44px !important;
    min-width: 44px !important;
  }
  
  /* All buttons should be touch-friendly */
  button {
    min-height: 44px !important;
    min-width: 44px !important;
    padding: 12px 16px !important;
  }
  
  /* Input fields touch-friendly */
  input, textarea {
    min-height: 44px !important;
    font-size: 16px !important; /* Prevents iOS zoom on focus */
  }
  
  /* Larger text for readability */
  body {
    font-size: 16px !important;
  }
  
  /* Mobile scroll improvements */
  .mobile-scroll {
    -webkit-overflow-scrolling: touch !important;
    overscroll-behavior: contain !important;
  }
  
  /* Mobile safe areas */
  .safe-area-top {
    padding-top: env(safe-area-inset-top) !important;
  }
  
  .safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom) !important;
  }
  
  /* Mobile navigation - bottom bar */
  .nav-mobile {
    position: fixed !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;
    z-index: 1000 !important;
    background: rgba(15, 23, 42, 0.95) !important;
    backdrop-filter: blur(10px) !important;
    border-top: 1px solid rgba(71, 85, 105, 0.3) !important;
    padding-bottom: env(safe-area-inset-bottom) !important;
  }
  
  /* Hamburger menu for mobile */
  .mobile-menu-btn {
    position: fixed !important;
    top: 16px !important;
    left: 16px !important;
    z-index: 1001 !important;
    width: 44px !important;
    height: 44px !important;
    border-radius: 12px !important;
    background: rgba(0, 0, 0, 0.6) !important;
    backdrop-filter: blur(10px) !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
  }
  
  /* Sidebar overlay background */
  .sidebar-overlay {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    background: rgba(0, 0, 0, 0.6) !important;
    z-index: 999 !important;
  }
  
  /* Chat header adjustments for mobile */
  .backdrop-blur-xl.border-b.p-4 {
    padding-top: max(16px, env(safe-area-inset-top)) !important;
  }
  
  /* Hide resize handle on mobile */
  .cursor-col-resize {
    display: none !important;
  }
}

/* iOS specific styles */
@supports (-webkit-touch-callout: none) {
  .ios-scroll {
    -webkit-overflow-scrolling: touch !important;
  }
  
  .ios-input {
    -webkit-appearance: none !important;
    border-radius: 0 !important;
  }
}

/* Android specific styles */
@media (pointer: coarse) {
  .android-touch {
    touch-action: manipulation !important;
  }
}

/* Mobile landscape adjustments */
@media (max-width: 768px) and (orientation: landscape) {
  .landscape-hidden {
    display: none !important;
  }
  
  .landscape-compact {
    height: 60vh !important;
  }
}

/* Mobile keyboard adjustments */
@media (max-height: 500px) {
  .keyboard-adjust {
    height: calc(100vh - 200px) !important;
  }
}

/* Additional mobile optimizations */
@media (max-width: 768px) {
  /* Intro slides mobile */
  .text-6xl {
    font-size: 2.5rem !important; /* Smaller on mobile */
  }
  
  .text-8xl {
    font-size: 3.5rem !important;
  }
  
  .text-2xl {
    font-size: 1.25rem !important;
  }
  
  .text-3xl {
    font-size: 1.5rem !important;
  }
  
  /* Modal sizing for mobile */
  .rounded-2xl {
    border-radius: 16px !important;
  }
  
  /* Onboarding modal mobile */
  .max-w-md {
    max-width: 90vw !important;
  }
  
  /* Settings dialog mobile */
  .max-w-lg {
    max-width: 90vw !important;
  }
  
  /* Image preview mobile */
  .max-w-xs {
    max-width: 80vw !important;
  }
  
  /* Fix onboarding slideshow buttons - move to bottom on mobile */
  .min-h-screen.relative .absolute.top-8 {
    top: auto !important;
    bottom: 2rem !important;
    left: 1rem !important;
    right: 1rem !important;
  }
  
  /* Ensure buttons are visible on mobile */
  .min-h-screen.relative .absolute.top-8 button {
    font-size: 0.875rem !important;
    padding: 0.5rem 1rem !important;
  }
  
  .max-h-48 {
    max-height: 30vh !important;
  }
  
  /* Chat messages mobile spacing */
  .space-y-4 > * + * {
    margin-top: 1rem !important;
  }
  
  /* Reduce padding on mobile */
  .p-6 {
    padding: 1rem !important;
  }
  
  .p-8 {
    padding: 1.5rem !important;
  }
  
  /* Account dialog mobile */
  .w-24.h-24 {
    width: 5rem !important;
    height: 5rem !important;
  }
  
  /* Statistics cards mobile */
  .grid {
    grid-template-columns: 1fr !important;
  }
  
  /* Prevent text selection on mobile */
  * {
    -webkit-user-select: none;
    user-select: none;
  }
  
  /* Allow selection in input fields */
  input, textarea {
    -webkit-user-select: text !important;
    user-select: text !important;
  }
  
  /* Smooth scrolling */
  * {
    scroll-behavior: smooth;
  }
  
  /* Prevent overscroll bounce */
  body {
    overscroll-behavior: none;
  }
  
  /* Fix for iOS bottom bar */
  .h-screen {
    height: 100dvh !important; /* Dynamic viewport height */
  }
  
  /* Group modal mobile */
  .space-y-3 {
    gap: 0.75rem !important;
  }
}

/* Small phones (< 375px) */
@media (max-width: 375px) {
  /* Even smaller text for tiny screens */
  .text-6xl {
    font-size: 2rem !important;
  }
  
  .text-8xl {
    font-size: 2.5rem !important;
  }
  
  button {
    padding: 10px 12px !important;
  }
}
